---
import type { CollectionEntry } from "astro:content";
import { GlowingEffect } from "@/components/ui/glowing-effect";

type Props = {
    entry: CollectionEntry<"blog">;
};

const { entry } = Astro.props as {
    entry: CollectionEntry<"blog">;
};

const tag = entry.data.tag || "resistance";
const isTakeover = tag === "takeover";
---

<a
    class={`group block cursor-pointer blog-card-link ${isTakeover ? 'takeover-theme' : 'resistance-theme'}`}
    href={`/${entry.collection}/${entry.id}`}
>
  <div class="blog-card-wrapper relative rounded-2xl">
    <GlowingEffect 
      client:visible
      blur={0}
      borderWidth={4}
      spread={60}
      glow={false}
      disabled={false}
      proximity={64}
      inactiveZone={0.01}
      movementDuration={1.5}
    />
    <div class="blog-card-container relative border-2 border-border rounded-2xl overflow-hidden">
            <div
                class="w-full aspect-[610/400] overflow-hidden"
            >
                <img
                    src={entry.data.image?.url ||
                        `https://placehold.co/600x400?text=${entry.data.title}`}
                    alt={entry.data.image?.alt || entry.data.title}
                    class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
                />
            </div>

            <div class="space-y-4 text-center p-6">
                <h3
                    class={`heading uppercase text-xl md:text-2xl line-clamp-2 ${isTakeover ? 'takeover-gradient-text' : 'resistance-gradient-text'}`}
                >
                    {entry.data.title}
                </h3>
                <p
                    class="text-base md:text-lg text-secondary line-clamp-3"
                >
                    {entry.data.description}
                </p>
            </div>
        </div>
    </div>
</a>

<style>
  .blog-card-link {
    text-decoration: none;
  }

  .blog-card-wrapper {
    transition: all 0.3s ease;
    --card-border-radius: 1rem;
    border-radius: var(--card-border-radius);
  }
  
  .blog-card-wrapper :global(.glow::after) {
    border-radius: var(--card-border-radius) !important;
  }

  .takeover-theme:hover .blog-card-wrapper {
    transform: translateY(-4px);
  }

  .resistance-theme:hover .blog-card-wrapper {
    transform: translateY(-4px);
  }

  .blog-card-container {
    background: var(--background);
  }

  .takeover-gradient-text {
    background: linear-gradient(90deg, #FF4C4C, #FF6B3D, #E63946);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradient-shift 8s ease-in-out infinite;
  }

  .resistance-gradient-text {
    background: linear-gradient(90deg, #5AA469, #6FC7B8, #2E8BC0);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradient-shift 8s ease-in-out infinite;
  }

  @keyframes gradient-shift {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }
</style>
